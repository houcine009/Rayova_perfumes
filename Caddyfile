# Frontend - Main domain with automatic HTTPS
rayovaparfums.com, www.rayovaparfums.com {
    root * /var/www/frontend
    file_server
    
    # Handle React Router (SPA)
    try_files {path} /index.html
    
    # Security headers
    header {
        X-Content-Type-Options nosniff
        X-Frame-Options DENY
        X-XSS-Protection "1; mode=block"
    }
    
    # Gzip compression
    encode gzip
}

# Backend API - Subdomain with automatic HTTPS
api.rayovaparfums.com {
    reverse_proxy backend:80
    
    # CORS headers
    header {
        Access-Control-Allow-Origin https://rayovaparfums.com
        Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
        Access-Control-Allow-Headers "Content-Type, Authorization, Accept"
        Access-Control-Allow-Credentials true
    }
    
    # Handle preflight requests
    @options method OPTIONS
    respond @options 204
}
